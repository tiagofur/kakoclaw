services:
  kakoclaw:
    build: .
    ports:
      - "127.0.0.1:18880:18880"
    environment:
      KAKOCLAW_AGENTS_DEFAULTS_PROVIDER: zhipu
      KAKOCLAW_AGENTS_DEFAULTS_MODEL: glm-4.7
      KAKOCLAW_AGENTS_DEFAULTS_RESTRICT_TO_WORKSPACE: "true"
      KAKOCLAW_AGENTS_DEFAULTS_WORKSPACE: "/home/kakoclaw/.KakoClaw/workspace"
      KAKOCLAW_STORAGE_PATH: "/home/kakoclaw/.KakoClaw/KakoClaw.db"
      KAKOCLAW_WEB_ENABLED: "true"
      KAKOCLAW_WEB_HOST: 0.0.0.0
      KAKOCLAW_WEB_PORT: "18880"
      KAKOCLAW_WEB_USERNAME: admin
      KAKOCLAW_WEB_PASSWORD: "${KAKOCLAW_WEB_PASSWORD}"
      KAKOCLAW_PROVIDERS_ZHIPU_API_KEY: "${KAKOCLAW_PROVIDERS_ZHIPU_API_KEY}"
      KAKOCLAW_PROVIDERS_ZHIPU_API_BASE: "https://api.z.ai/api/coding/paas/v4"
      # Email Tools Configuration
      KAKOCLAW_TOOLS_EMAIL_ENABLED: "true"
      KAKOCLAW_TOOLS_EMAIL_HOST: "smtp.gmail.com"
      KAKOCLAW_TOOLS_EMAIL_PORT: "587"
      KAKOCLAW_TOOLS_EMAIL_USERNAME: "${KAKOCLAW_TOOLS_EMAIL_USERNAME}"
      KAKOCLAW_TOOLS_EMAIL_PASSWORD: "${KAKOCLAW_TOOLS_EMAIL_PASSWORD}"
      KAKOCLAW_TOOLS_EMAIL_FROM: "${KAKOCLAW_TOOLS_EMAIL_FROM}"
      KAKOCLAW_TOOLS_EMAIL_TO: "${KAKOCLAW_TOOLS_EMAIL_TO}"
    volumes:
      - ./KakoClaw-data:/home/kakoclaw/.KakoClaw
    restart: unless-stopped
