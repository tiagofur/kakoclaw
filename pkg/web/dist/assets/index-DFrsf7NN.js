import{d as e,r as t,c as s,o as a,a as o,b as l,e as r,u as c,f as n,g as i,w as d,h as u,v as p,t as b,i as w,j as v,k as m,l as h,n as f,m as g,p as x,q as k,F as y,s as S,x as C,y as T,z as _,A as D,B as M,C as P,D as A}from"./vue-jEjkYtiB.js";import{a as L}from"./vendor-DGEJccjb.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const I=e("auth",()=>{const e=t(null),a=t(null),o=t(null),l=s(()=>!!a.value),r=s(()=>!!o.value&&new Date>new Date(o.value));return{user:e,token:a,sessionExpiry:o,isAuthenticated:l,isSessionExpired:r,setCredentials:function(t,s,l=1440){e.value=t,a.value=s;const r=new Date;r.setMinutes(r.getMinutes()+l),o.value=r.toISOString(),localStorage.setItem("auth.user",JSON.stringify(t)),localStorage.setItem("auth.token",s),localStorage.setItem("auth.sessionExpiry",o.value)},restoreSession:function(){const t=localStorage.getItem("auth.user"),s=localStorage.getItem("auth.token"),l=localStorage.getItem("auth.sessionExpiry");t&&s&&l&&(e.value=JSON.parse(t),a.value=s,o.value=l)},logout:function(){e.value=null,a.value=null,o.value=null,localStorage.removeItem("auth.user"),localStorage.removeItem("auth.token"),localStorage.removeItem("auth.sessionExpiry")}}}),j=e("ui",()=>{const e=t("dark"),s=t(!1),a=t("chat");function o(t){e.value=t,localStorage.setItem("ui.theme",t),"dark"===t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}return{theme:e,sidebarCollapsed:s,activeTab:a,setTheme:o,toggleTheme:function(){o("dark"===e.value?"light":"dark")},toggleSidebar:function(){s.value=!s.value,localStorage.setItem("ui.sidebarCollapsed",s.value)},setActiveTab:function(e){a.value=e},restoreUIPreferences:function(){const e=localStorage.getItem("ui.theme"),t=localStorage.getItem("ui.sidebarCollapsed");e&&o(e),null!==t&&(s.value=JSON.parse(t))}}}),U={__name:"App",setup(e){const t=I(),s=j();return a(()=>{t.restoreSession(),s.restoreUIPreferences()}),(e,t)=>{const s=l("router-view");return r(),o(s)}}},E=e("chat",()=>{const e=t([]),s=t(!1),a=t(!1),o=t(null);return{messages:e,isConnected:s,isLoading:a,ws:o,addMessage:function(t){e.value.push({id:Date.now(),...t,timestamp:(new Date).toISOString()})},clearMessages:function(){e.value=[]},setConnected:function(e){s.value=e},setLoading:function(e){a.value=e},setWebSocket:function(e){o.value=e}}}),B=L.create({baseURL:"/api/v1",timeout:1e4,headers:{"Content-Type":"application/json"}});B.interceptors.request.use(e=>{const t=I();return t.token&&(e.headers.Authorization=`Bearer ${t.token}`),e},e=>Promise.reject(e)),B.interceptors.response.use(e=>e,e=>{var t;if(401===(null==(t=e.response)?void 0:t.status)){I().logout(),window.location.href="/login"}return Promise.reject(e)});const F=async(e,t)=>{const s=await B.post("/auth/login",{username:e,password:t});return I().setCredentials({username:s.data.username},s.data.token,s.data.expires_in?Math.floor(s.data.expires_in/60):1440),s.data},z=async(e,t)=>(await B.post("/auth/change-password",{current_password:e,new_password:t})).data,$={class:"min-h-screen bg-picoclaw-bg flex items-center justify-center p-4"},W={class:"w-full max-w-md"},N={class:"bg-picoclaw-surface border border-picoclaw-border rounded-lg p-8 shadow-lg"},O=["disabled"],R=["disabled"],V={key:0,class:"p-3 bg-picoclaw-error/20 border border-picoclaw-error rounded text-picoclaw-error text-sm"},q=["disabled"],J={__name:"LoginForm",setup(e){const s=c();I();const a=t({username:"",password:""}),o=t(!1),l=t(""),v=async()=>{var e,t;if(a.value.username&&a.value.password){o.value=!0,l.value="";try{await F(a.value.username,a.value.password),await s.push("/dashboard")}catch(r){console.error("Login error:",r),l.value=(null==(t=null==(e=r.response)?void 0:e.data)?void 0:t.message)||"Login failed. Please try again."}finally{o.value=!1}}else l.value="Please fill in all fields"};return(e,t)=>(r(),n("div",$,[i("div",W,[t[6]||(t[6]=i("div",{class:"text-center mb-8"},[i("h1",{class:"text-4xl font-bold text-picoclaw-accent mb-2"},"PicoClaw"),i("p",{class:"text-picoclaw-text-secondary"},"AI Agent Control Panel")],-1)),i("div",N,[t[4]||(t[4]=i("h2",{class:"text-2xl font-bold mb-6 text-picoclaw-text"},"Login",-1)),i("form",{onSubmit:d(v,["prevent"]),class:"space-y-4"},[i("div",null,[t[2]||(t[2]=i("label",{for:"username",class:"block text-sm font-medium mb-2"}," Username ",-1)),u(i("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.value.username=e),id:"username",type:"text",placeholder:"Enter your username",class:"w-full px-4 py-2 bg-picoclaw-bg border border-picoclaw-border rounded focus-ring text-picoclaw-text placeholder-picoclaw-text-secondary",required:"",disabled:o.value},null,8,O),[[p,a.value.username]])]),i("div",null,[t[3]||(t[3]=i("label",{for:"password",class:"block text-sm font-medium mb-2"}," Password ",-1)),u(i("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>a.value.password=e),id:"password",type:"password",placeholder:"Enter your password",class:"w-full px-4 py-2 bg-picoclaw-bg border border-picoclaw-border rounded focus-ring text-picoclaw-text placeholder-picoclaw-text-secondary",required:"",disabled:o.value},null,8,R),[[p,a.value.password]])]),l.value?(r(),n("div",V,b(l.value),1)):w("",!0),i("button",{type:"submit",disabled:o.value,class:"w-full px-4 py-2 bg-picoclaw-accent hover:bg-picoclaw-accent-hover text-white font-medium rounded transition-smooth disabled:opacity-50 disabled:cursor-not-allowed"},b(o.value?"Signing in...":"Sign In"),9,q)],32),t[5]||(t[5]=i("p",{class:"text-xs text-picoclaw-text-secondary text-center mt-4"}," Default credentials: admin / (set during setup) ",-1))])])]))}},H={__name:"LoginPage",setup:e=>(e,t)=>(r(),o(J))},K={class:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50"},Z={class:"bg-picoclaw-surface border border-picoclaw-border rounded-lg max-w-md w-full shadow-lg"},G={class:"flex items-center justify-between p-4 border-b border-picoclaw-border"},Q=["disabled"],X=["disabled"],Y=["disabled"],ee={key:0,class:"p-3 bg-picoclaw-error/20 border border-picoclaw-error rounded text-picoclaw-error text-sm"},te={key:1,class:"p-3 bg-picoclaw-success/20 border border-picoclaw-success rounded text-picoclaw-success text-sm"},se={class:"flex gap-3 pt-4 border-t border-picoclaw-border"},ae=["disabled"],oe=["disabled"],le={__name:"ChangePasswordModal",emits:["close"],setup(e,{emit:s}){const a=s,o=t({current:"",new:"",confirm:""}),l=t(!1),c=t(""),v=t(""),m=async()=>{var e,t;if(c.value="",v.value="",o.value.current&&o.value.new&&o.value.confirm)if(o.value.new.length<10)c.value="New password must be at least 10 characters";else if(o.value.new===o.value.confirm){l.value=!0;try{await z(o.value.current,o.value.new),v.value="Password changed successfully",o.value={current:"",new:"",confirm:""},setTimeout(()=>{a("close")},1500)}catch(s){console.error("Password change error:",s),c.value=(null==(t=null==(e=s.response)?void 0:e.data)?void 0:t.message)||"Failed to change password"}finally{l.value=!1}}else c.value="Passwords do not match";else c.value="Please fill in all fields"};return(e,t)=>(r(),n("div",K,[i("div",Z,[i("div",G,[t[6]||(t[6]=i("h3",{class:"text-lg font-semibold"},"Change Password",-1)),i("button",{onClick:t[0]||(t[0]=t=>e.$emit("close")),class:"p-1 hover:bg-picoclaw-border rounded transition-smooth"},[...t[5]||(t[5]=[i("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),i("form",{onSubmit:d(m,["prevent"]),class:"p-4 space-y-4"},[i("div",null,[t[7]||(t[7]=i("label",{for:"current",class:"block text-sm font-medium mb-2"}," Current Password ",-1)),u(i("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.value.current=e),id:"current",type:"password",placeholder:"Enter current password",class:"w-full px-3 py-2 bg-picoclaw-bg border border-picoclaw-border rounded focus-ring text-sm",required:"",disabled:l.value},null,8,Q),[[p,o.value.current]])]),i("div",null,[t[8]||(t[8]=i("label",{for:"new",class:"block text-sm font-medium mb-2"}," New Password ",-1)),u(i("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.value.new=e),id:"new",type:"password",placeholder:"Enter new password (min 10 chars)",class:"w-full px-3 py-2 bg-picoclaw-bg border border-picoclaw-border rounded focus-ring text-sm",required:"",minlength:"10",disabled:l.value},null,8,X),[[p,o.value.new]]),t[9]||(t[9]=i("p",{class:"text-xs text-picoclaw-text-secondary mt-1"},"Minimum 10 characters",-1))]),i("div",null,[t[10]||(t[10]=i("label",{for:"confirm",class:"block text-sm font-medium mb-2"}," Confirm Password ",-1)),u(i("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.value.confirm=e),id:"confirm",type:"password",placeholder:"Confirm new password",class:"w-full px-3 py-2 bg-picoclaw-bg border border-picoclaw-border rounded focus-ring text-sm",required:"",disabled:l.value},null,8,Y),[[p,o.value.confirm]])]),c.value?(r(),n("div",ee,b(c.value),1)):w("",!0),v.value?(r(),n("div",te,b(v.value),1)):w("",!0),i("div",se,[i("button",{type:"button",onClick:t[4]||(t[4]=t=>e.$emit("close")),class:"flex-1 px-3 py-2 border border-picoclaw-border rounded hover:bg-picoclaw-border transition-smooth",disabled:l.value}," Cancel ",8,ae),i("button",{type:"submit",class:"flex-1 px-3 py-2 bg-picoclaw-accent hover:bg-picoclaw-accent-hover text-white rounded transition-smooth disabled:opacity-50",disabled:l.value},b(l.value?"Updating...":"Update Password"),9,oe)])],32)])]))}},re=(e,t)=>{const s=e.__vccOpts||e;for(const[a,o]of t)s[a]=o;return s},ce={class:"flex h-screen bg-picoclaw-bg text-picoclaw-text"},ne={class:"p-4 border-b border-picoclaw-border flex items-center justify-between"},ie={key:0,class:"font-bold text-lg text-picoclaw-accent"},de={class:"flex-1 p-3 space-y-2"},ue={key:0},pe={key:0},be={class:"border-t border-picoclaw-border p-3 space-y-2"},we=["title"],ve={key:0,class:"w-5 h-5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},me={key:1,class:"w-5 h-5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},he={key:2,class:"text-xs"},fe={key:0},ge={key:0,class:"absolute bottom-16 left-3 right-3 bg-picoclaw-border rounded p-2 space-y-1 text-sm"},xe={class:"flex-1 flex flex-col overflow-hidden"},ke={class:"bg-picoclaw-surface border-b border-picoclaw-border h-14 flex items-center px-6 justify-between"},ye={class:"text-lg font-semibold"},Se={class:"flex items-center gap-4"},Ce={key:0,class:"text-xs text-picoclaw-text-secondary"},Te={class:"flex-1 overflow-auto"},_e=re({__name:"Sidebar",setup(e){const s=c(),a=I(),d=j(),u=t(!1),p=t(!1),x=d.sidebarCollapsed,k=d.theme,y=d.activeTab,S=()=>d.toggleSidebar(),C=()=>d.toggleTheme(),T=e=>d.setActiveTab(e),_=async()=>{a.logout(),await s.push("/login")},D=()=>{if(!a.sessionExpiry)return"";const e=new Date(a.sessionExpiry)-new Date;if(e<=0)return"Expired";const t=Math.floor(e/36e5),s=Math.floor(e%36e5/6e4);return t>0?`${t}h ${s}m`:`${s}m`};return(e,t)=>{var s;const c=l("router-link");return r(),n("div",ce,[i("div",{class:f(["transition-smooth",[v(x)?"w-16":"w-64","bg-picoclaw-surface border-r border-picoclaw-border flex flex-col"]])},[i("div",ne,[v(x)?w("",!0):(r(),n("div",ie," PicoClaw ")),i("button",{onClick:S,class:"p-1 hover:bg-picoclaw-border rounded transition-smooth",title:"Toggle sidebar"},[...t[5]||(t[5]=[i("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])])]),i("nav",de,[m(c,{to:"/dashboard",class:f(["flex items-center gap-3 px-3 py-2 rounded hover:bg-picoclaw-border transition-smooth",{"bg-picoclaw-border":"chat"===v(y)}]),onClick:t[0]||(t[0]=e=>T("chat"))},{default:h(()=>[t[6]||(t[6]=i("svg",{class:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})],-1)),v(x)?w("",!0):(r(),n("span",ue,"Chat"))]),_:1},8,["class"]),m(c,{to:"/dashboard",class:f(["flex items-center gap-3 px-3 py-2 rounded hover:bg-picoclaw-border transition-smooth",{"bg-picoclaw-border":"tasks"===v(y)}]),onClick:t[1]||(t[1]=e=>T("tasks"))},{default:h(()=>[t[7]||(t[7]=i("svg",{class:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})],-1)),v(x)?w("",!0):(r(),n("span",pe,"Tasks"))]),_:1},8,["class"])]),i("div",be,[i("button",{onClick:C,class:"w-full flex items-center gap-3 px-3 py-2 rounded hover:bg-picoclaw-border transition-smooth text-sm",title:"dark"===v(k)?"Switch to light mode":"Switch to dark mode"},["dark"===v(k)?(r(),n("svg",ve,[...t[8]||(t[8]=[i("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"},null,-1)])])):(r(),n("svg",me,[...t[9]||(t[9]=[i("path",{"fill-rule":"evenodd",d:"M10 2a1 1 0 011 1v2a1 1 0 11-2 0V3a1 1 0 011-1zM4.22 4.22a1 1 0 011.415 0l1.414 1.414a1 1 0 00-1.415 1.415L4.22 5.636a1 1 0 010-1.415zm11.314 0a1 1 0 011.415 0l1.414 1.414a1 1 0 11-1.415 1.415l-1.414-1.414a1 1 0 010-1.415zM4 10a1 1 0 011-1h2a1 1 0 110 2H5a1 1 0 01-1-1zm12 0a1 1 0 011-1h2a1 1 0 110 2h-2a1 1 0 01-1-1z","clip-rule":"evenodd"},null,-1)])])),v(x)?w("",!0):(r(),n("span",he,b("dark"===v(k)?"Light":"Dark"),1))],8,we),i("button",{onClick:t[2]||(t[2]=e=>u.value=!u.value),class:"w-full flex items-center gap-3 px-3 py-2 rounded hover:bg-picoclaw-border transition-smooth text-sm"},[t[10]||(t[10]=i("svg",{class:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),v(x)?w("",!0):(r(),n("span",fe,b((null==(s=v(a).user)?void 0:s.username)||"Profile"),1))]),u.value?(r(),n("div",ge,[i("button",{onClick:t[3]||(t[3]=e=>{p.value=!0,u.value=!1}),class:"w-full text-left px-3 py-2 hover:bg-picoclaw-bg rounded transition-smooth"}," Change Password "),i("button",{onClick:_,class:"w-full text-left px-3 py-2 hover:bg-picoclaw-bg rounded transition-smooth text-picoclaw-error"}," Logout ")])):w("",!0)])],2),i("div",xe,[i("div",ke,[i("div",ye,b("chat"===v(y)?"Chat":"Tasks"),1),i("div",Se,[v(a).sessionExpiry?(r(),n("span",Ce," Session expires: "+b(D()),1)):w("",!0)])]),i("div",Te,[g(e.$slots,"default",{},void 0)])]),p.value?(r(),o(le,{key:0,onClose:t[4]||(t[4]=e=>p.value=!1)})):w("",!0)])}}},[["__scopeId","data-v-7ec24cd9"]]);class De{constructor(){this.ws=null,this.url=this.getWebSocketURL("/ws/chat"),this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectDelay=1e3,this.listeners={}}getWebSocketURL(e){return`${"https:"===window.location.protocol?"wss:":"ws:"}//${window.location.host}${e}`}connect(){return new Promise((e,t)=>{try{const s=I().token;this.ws=new WebSocket(this.url),this.ws.onopen=()=>{s&&this.send({type:"auth",token:s}),this.reconnectAttempts=0,this.emit("connected"),e()},this.ws.onmessage=e=>{try{const t=JSON.parse(e.data);this.emit("message",t)}catch(t){console.error("Failed to parse WebSocket message:",t)}},this.ws.onerror=e=>{console.error("WebSocket error:",e),this.emit("error",e),t(e)},this.ws.onclose=()=>{this.emit("disconnected"),this.attemptReconnect()}}catch(s){t(s)}})}attemptReconnect(){if(this.reconnectAttempts<this.maxReconnectAttempts){this.reconnectAttempts++;const e=this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1);setTimeout(()=>this.connect(),e)}}send(e){this.ws&&this.ws.readyState===WebSocket.OPEN?this.ws.send(JSON.stringify(e)):console.warn("WebSocket not connected")}on(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}off(e,t){this.listeners[e]&&(this.listeners[e]=this.listeners[e].filter(e=>e!==t))}emit(e,t){this.listeners[e]&&this.listeners[e].forEach(e=>e(t))}disconnect(){this.ws&&(this.ws.close(),this.ws=null)}isConnected(){return this.ws&&this.ws.readyState===WebSocket.OPEN}}class Me{constructor(){this.ws=null,this.url=this.getWebSocketURL("/ws/tasks"),this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectDelay=1e3,this.listeners={}}getWebSocketURL(e){return`${"https:"===window.location.protocol?"wss:":"ws:"}//${window.location.host}${e}`}connect(){return new Promise((e,t)=>{try{const s=I().token;this.ws=new WebSocket(this.url),this.ws.onopen=()=>{s&&this.send({type:"auth",token:s}),this.reconnectAttempts=0,this.emit("connected"),e()},this.ws.onmessage=e=>{try{const t=JSON.parse(e.data);this.emit("update",t)}catch(t){console.error("Failed to parse WebSocket message:",t)}},this.ws.onerror=e=>{console.error("WebSocket error:",e),this.emit("error",e),t(e)},this.ws.onclose=()=>{this.emit("disconnected"),this.attemptReconnect()}}catch(s){t(s)}})}attemptReconnect(){if(this.reconnectAttempts<this.maxReconnectAttempts){this.reconnectAttempts++;const e=this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1);setTimeout(()=>this.connect(),e)}}send(e){this.ws&&this.ws.readyState===WebSocket.OPEN?this.ws.send(JSON.stringify(e)):console.warn("WebSocket not connected")}on(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}off(e,t){this.listeners[e]&&(this.listeners[e]=this.listeners[e].filter(e=>e!==t))}emit(e,t){this.listeners[e]&&this.listeners[e].forEach(e=>e(t))}disconnect(){this.ws&&(this.ws.close(),this.ws=null)}isConnected(){return this.ws&&this.ws.readyState===WebSocket.OPEN}}const Pe={class:"flex flex-col h-full bg-picoclaw-bg"},Ae={key:0,class:"flex items-center justify-center h-full text-picoclaw-text-secondary"},Le={class:"text-sm whitespace-pre-wrap break-words"},Ie={key:1,class:"flex justify-start"},je={class:"border-t border-picoclaw-border bg-picoclaw-surface p-4"},Ue=["disabled"],Ee=["disabled"],Be={class:"text-xs text-picoclaw-text-secondary mt-2"},Fe={key:0,class:"text-picoclaw-success"},ze={key:1,class:"text-picoclaw-error"},$e=re({__name:"ChatTab",setup(e){const s=E(),o=t(null),l=t(""),c=t(!1),m=t(!1),h=s.messages,g=new De;a(async()=>{try{await g.connect(),c.value=!0,s.setConnected(!0),g.on("message",e=>{"message"===e.type&&s.addMessage({role:e.role||"assistant",content:e.content}),"ready"===e.type&&(m.value=!1)}),g.on("disconnected",()=>{c.value=!1,s.setConnected(!1)}),g.on("connected",()=>{c.value=!0,s.setConnected(!0)}),s.setWebSocket(g)}catch(e){console.error("Failed to connect to chat:",e)}}),x(h,async()=>{await k(),o.value&&(o.value.scrollTop=o.value.scrollHeight)});const T=async()=>{const e=l.value.trim();e&&(s.addMessage({role:"user",content:e}),l.value="",m.value=!0,g.isConnected()?g.send({type:"message",content:e}):m.value=!1)};return(e,t)=>(r(),n("div",Pe,[i("div",{ref_key:"messagesContainer",ref:o,class:"flex-1 overflow-y-auto p-4 space-y-4"},[0===v(h).length?(r(),n("div",Ae,[...t[1]||(t[1]=[i("div",{class:"text-center"},[i("svg",{class:"w-12 h-12 mx-auto mb-3 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})]),i("p",null,"Start a conversation")],-1)])])):w("",!0),(r(!0),n(y,null,S(v(h),e=>{return r(),n("div",{key:e.id,class:"animate-fadeIn"},[i("div",{class:f(["flex","user"===e.role?"justify-end":"justify-start"])},[i("div",{class:f(["max-w-xs lg:max-w-md px-4 py-2 rounded-lg","user"===e.role?"bg-picoclaw-accent text-white rounded-br-none":"bg-picoclaw-surface border border-picoclaw-border rounded-bl-none"])},[i("p",Le,b(e.content),1),i("p",{class:f(["text-xs mt-1","user"===e.role?"opacity-70":"text-picoclaw-text-secondary"])},b((t=e.timestamp,new Date(t).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}))),3)],2)],2)]);var t}),128)),m.value?(r(),n("div",Ie,[...t[2]||(t[2]=[C('<div class="bg-picoclaw-surface border border-picoclaw-border rounded-lg rounded-bl-none px-4 py-2" data-v-d1329d3d><div class="flex gap-2" data-v-d1329d3d><div class="w-2 h-2 bg-picoclaw-accent rounded-full animate-bounce" style="animation-delay:0s;" data-v-d1329d3d></div><div class="w-2 h-2 bg-picoclaw-accent rounded-full animate-bounce" style="animation-delay:0.2s;" data-v-d1329d3d></div><div class="w-2 h-2 bg-picoclaw-accent rounded-full animate-bounce" style="animation-delay:0.4s;" data-v-d1329d3d></div></div></div>',1)])])):w("",!0)],512),i("div",je,[i("form",{onSubmit:d(T,["prevent"]),class:"flex gap-2"},[u(i("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.value=e),type:"text",placeholder:"Type a message or /task list, /task run...",class:"flex-1 px-4 py-2 bg-picoclaw-bg border border-picoclaw-border rounded focus-ring text-sm",disabled:!c.value||m.value},null,8,Ue),[[p,l.value]]),i("button",{type:"submit",disabled:!c.value||m.value||!l.value.trim(),class:"px-4 py-2 bg-picoclaw-accent hover:bg-picoclaw-accent-hover text-white rounded transition-smooth disabled:opacity-50 disabled:cursor-not-allowed"},[...t[3]||(t[3]=[i("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})],-1)])],8,Ee)],32),i("div",Be,[c.value?(r(),n("span",Fe,"● Connected")):(r(),n("span",ze,"● Disconnected"))])])]))}},[["__scopeId","data-v-d1329d3d"]]),We=e("tasks",()=>{const e=t([]),a=t(null),o=t({search:"",status:"",dateFrom:null,dateTo:null}),l=t("recent"),r=t(!1),c=t(null),n=s(()=>{let t=[...e.value];if(o.value.search){const e=o.value.search.toLowerCase();t=t.filter(t=>t.title.toLowerCase().includes(e)||t.description&&t.description.toLowerCase().includes(e))}return o.value.status&&(t=t.filter(e=>e.status===o.value.status)),(o.value.dateFrom||o.value.dateTo)&&(t=t.filter(e=>{const t=new Date(e.created_at),s=o.value.dateFrom?new Date(o.value.dateFrom):null,a=o.value.dateTo?new Date(o.value.dateTo):null;return!(s&&t<s)&&!(a&&t>a)})),t}),i=s(()=>{const e={};return["backlog","todo","in_progress","review","done"].forEach(t=>{e[t]=n.value.filter(e=>e.status===t)}),Object.keys(e).forEach(t=>{e[t]=function(e){const t=[...e];switch(l.value){case"recent":return t.sort((e,t)=>new Date(t.created_at)-new Date(e.created_at));case"oldest":return t.sort((e,t)=>new Date(e.created_at)-new Date(t.created_at));case"a-z":return t.sort((e,t)=>e.title.localeCompare(t.title));case"z-a":return t.sort((e,t)=>t.title.localeCompare(e.title));default:return t}}(e[t])}),e});return{tasks:e,selectedTask:a,filter:o,sortBy:l,isLoading:r,ws:c,filteredTasks:n,tasksByStatus:i,setTasks:function(t){e.value=t},addTask:function(t){e.value.push(t)},updateTask:function(t,s){const a=e.value.findIndex(e=>e.id===t);-1!==a&&(e.value[a]={...e.value[a],...s})},removeTask:function(t){e.value=e.value.filter(e=>e.id!==t)},setSelectedTask:function(e){a.value=e},setFilter:function(e,t){o.value[e]=t},clearFilter:function(){o.value={search:"",status:"",dateFrom:null,dateTo:null}},setSortBy:function(e){l.value=e},setLoading:function(e){r.value=e},setWebSocket:function(e){c.value=e}}}),Ne=async()=>(await B.get("/tasks")).data||[],Oe=async(e,t="",s="backlog")=>(await B.post("/tasks",{title:e,description:t,status:s})).data,Re=async(e,t)=>(await B.put(`/tasks/${e}`,t)).data,Ve=async e=>{await B.delete(`/tasks/${e}`)},qe=async(e,t)=>(await B.patch(`/tasks/${e}/status`,{status:t})).data,Je=async e=>(await B.get(`/tasks/${e}/logs`)).data||[],He={class:"bg-picoclaw-surface border border-picoclaw-border rounded-lg p-3 flex flex-col h-full"},Ke={class:"mb-3 pb-3 border-b border-picoclaw-border"},Ze={class:"font-semibold flex items-center gap-2"},Ge={class:"text-xs bg-picoclaw-border text-picoclaw-text-secondary px-2 py-1 rounded"},Qe=["onDragstart","onClick"],Xe={class:"font-medium text-sm truncate group-hover:text-picoclaw-accent"},Ye={key:0,class:"text-xs text-picoclaw-text-secondary truncate mt-1"},et={class:"flex items-center gap-2 mt-2 pt-2 border-t border-picoclaw-border"},tt={class:"text-xs text-picoclaw-text-secondary ml-auto"},st={key:0,class:"text-center py-8 text-picoclaw-text-secondary"},at={__name:"KanbanColumn",props:{status:String,title:String,tasks:{type:Array,default:()=>[]}},emits:["task-click","task-drop"],setup(e){const t=e=>{const t={backlog:"bg-picoclaw-border text-picoclaw-text-secondary",todo:"bg-picoclaw-warning/20 text-picoclaw-warning",in_progress:"bg-picoclaw-accent/20 text-picoclaw-accent",review:"bg-picoclaw-accent/20 text-picoclaw-accent",done:"bg-picoclaw-success/20 text-picoclaw-success"};return t[e]||t.backlog};return(s,a)=>(r(),n("div",He,[i("div",Ke,[i("h3",Ze,[T(b(e.title)+" ",1),i("span",Ge,b(e.tasks.length),1)])]),i("div",{class:"flex-1 space-y-2 overflow-y-auto",onDragover:a[0]||(a[0]=d(()=>{},["prevent"])),onDrop:a[1]||(a[1]=e=>s.$emit("task-drop",e))},[(r(!0),n(y,null,S(e.tasks,e=>{return r(),n("div",{key:e.id,draggable:"true",onDragstart:t=>((e,t)=>{e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("taskId",t.id),e.dataTransfer.setData("sourceStatus",t.status)})(t,e),onClick:t=>s.$emit("task-click",e),class:"bg-picoclaw-bg border border-picoclaw-border rounded p-2 cursor-move hover:border-picoclaw-accent transition-smooth group"},[i("h4",Xe,b(e.title),1),e.description?(r(),n("p",Ye,b(e.description),1)):w("",!0),i("div",et,[i("span",{class:f(["text-xs px-2 py-1 rounded",t(e.status)])},b((o=e.status,{backlog:"Backlog",todo:"To Do",in_progress:"In Progress",review:"Review",done:"Done"}[o]||o)),3),i("span",tt,b((a=e.created_at,new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric"}))),1)])],40,Qe);var a,o}),128)),0===e.tasks.length?(r(),n("div",st,[...a[2]||(a[2]=[i("p",{class:"text-sm"},"No tasks",-1)])])):w("",!0)],32)]))}},ot={class:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50"},lt={class:"bg-picoclaw-surface border border-picoclaw-border rounded-lg max-w-md w-full shadow-lg"},rt={class:"flex items-center justify-between p-4 border-b border-picoclaw-border"},ct=["disabled"],nt=["disabled"],it=["disabled"],dt={key:0,class:"p-3 bg-picoclaw-error/20 border border-picoclaw-error rounded text-picoclaw-error text-sm"},ut={class:"flex gap-3 pt-4 border-t border-picoclaw-border"},pt=["disabled"],bt=["disabled"],wt={__name:"NewTaskModal",emits:["close","created"],setup(e,{emit:s}){const a=s,o=t({title:"",description:"",status:"backlog"}),l=t(!1),c=t(""),v=async()=>{if(c.value="",o.value.title.trim()){l.value=!0;try{a("created",{title:o.value.title,description:o.value.description,status:o.value.status})}catch(e){console.error("Create task error:",e),c.value="Failed to create task"}finally{l.value=!1}}else c.value="Task title is required"};return(e,t)=>(r(),n("div",ot,[i("div",lt,[i("div",rt,[t[6]||(t[6]=i("h3",{class:"text-lg font-semibold"},"Create New Task",-1)),i("button",{onClick:t[0]||(t[0]=t=>e.$emit("close")),class:"p-1 hover:bg-picoclaw-border rounded transition-smooth"},[...t[5]||(t[5]=[i("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),i("form",{onSubmit:d(v,["prevent"]),class:"p-4 space-y-4"},[i("div",null,[t[7]||(t[7]=i("label",{for:"title",class:"block text-sm font-medium mb-2"}," Task Title ",-1)),u(i("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.value.title=e),id:"title",type:"text",placeholder:"Enter task title",class:"w-full px-3 py-2 bg-picoclaw-bg border border-picoclaw-border rounded focus-ring text-sm",required:"",disabled:l.value},null,8,ct),[[p,o.value.title]])]),i("div",null,[t[8]||(t[8]=i("label",{for:"description",class:"block text-sm font-medium mb-2"}," Description (optional) ",-1)),u(i("textarea",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.value.description=e),id:"description",placeholder:"Enter task description",class:"w-full px-3 py-2 bg-picoclaw-bg border border-picoclaw-border rounded focus-ring text-sm resize-none",rows:"3",disabled:l.value},null,8,nt),[[p,o.value.description]])]),i("div",null,[t[10]||(t[10]=i("label",{for:"status",class:"block text-sm font-medium mb-2"}," Initial Status ",-1)),u(i("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.value.status=e),id:"status",class:"w-full px-3 py-2 bg-picoclaw-bg border border-picoclaw-border rounded focus-ring text-sm",disabled:l.value},[...t[9]||(t[9]=[C('<option value="backlog">Backlog</option><option value="todo">To Do</option><option value="in_progress">In Progress</option><option value="review">Review</option><option value="done">Done</option>',5)])],8,it),[[_,o.value.status]])]),c.value?(r(),n("div",dt,b(c.value),1)):w("",!0),i("div",ut,[i("button",{type:"button",onClick:t[4]||(t[4]=t=>e.$emit("close")),class:"flex-1 px-3 py-2 border border-picoclaw-border rounded hover:bg-picoclaw-border transition-smooth",disabled:l.value}," Cancel ",8,pt),i("button",{type:"submit",class:"flex-1 px-3 py-2 bg-picoclaw-accent hover:bg-picoclaw-accent-hover text-white rounded transition-smooth disabled:opacity-50",disabled:l.value},b(l.value?"Creating...":"Create Task"),9,bt)])],32)])]))}},vt={class:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 overflow-y-auto"},mt={class:"bg-picoclaw-surface border border-picoclaw-border rounded-lg max-w-2xl w-full shadow-lg my-4"},ht={class:"flex items-center justify-between p-4 border-b border-picoclaw-border"},ft={class:"text-lg font-semibold"},gt={class:"text-xs text-picoclaw-text-secondary"},xt={class:"p-4 space-y-4 max-h-96 overflow-y-auto"},kt=["disabled"],yt=["disabled"],St=["disabled"],Ct=["disabled"],Tt={key:0},_t={class:"bg-picoclaw-bg border border-picoclaw-border rounded p-3 text-xs max-h-48 overflow-y-auto"},Dt={class:"w-full text-left"},Mt={class:"divide-y divide-picoclaw-border"},Pt={class:"py-2 px-2 text-picoclaw-text-secondary whitespace-nowrap"},At={class:"py-2 px-2"},Lt={class:"py-2 px-2 text-picoclaw-text-secondary truncate"},It={key:1,class:"p-3 bg-picoclaw-error/20 border border-picoclaw-error rounded text-picoclaw-error text-sm"},jt={class:"border-t border-picoclaw-border p-4 flex gap-2 justify-end"},Ut=["disabled"],Et=["disabled"],Bt=["disabled"],Ft={__name:"TaskDetailsModal",props:{task:{type:Object,required:!0}},emits:["close","updated","deleted"],setup(e,{emit:s}){const o=e,l=s,c=t({title:o.task.title,description:o.task.description||"",status:o.task.status,result:o.task.result||""}),d=t([]),v=t(!1),m=t("");a(async()=>{try{d.value=await Je(o.task.id)}catch(e){console.error("Failed to load task logs:",e)}});const h=async()=>{m.value="",v.value=!0;try{await l("updated",o.task.id,{title:c.value.title,description:c.value.description,status:c.value.status,result:c.value.result})}catch(e){m.value="Failed to update task"}finally{v.value=!1}},f=async()=>{if(confirm("Are you sure you want to delete this task?")){m.value="",v.value=!0;try{await l("deleted",o.task.id)}catch(e){m.value="Failed to delete task",v.value=!1}}};return(t,s)=>(r(),n("div",vt,[i("div",mt,[i("div",ht,[i("div",null,[i("h3",ft,b(e.task.title),1),i("p",gt,"ID: "+b(e.task.id),1)]),i("button",{onClick:s[0]||(s[0]=e=>t.$emit("close")),class:"p-1 hover:bg-picoclaw-border rounded transition-smooth"},[...s[6]||(s[6]=[i("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),i("div",xt,[i("div",null,[s[7]||(s[7]=i("label",{class:"block text-sm font-medium mb-2"},"Title",-1)),u(i("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>c.value.title=e),type:"text",class:"w-full px-3 py-2 bg-picoclaw-bg border border-picoclaw-border rounded focus-ring text-sm",disabled:v.value},null,8,kt),[[p,c.value.title]])]),i("div",null,[s[8]||(s[8]=i("label",{class:"block text-sm font-medium mb-2"},"Description",-1)),u(i("textarea",{"onUpdate:modelValue":s[2]||(s[2]=e=>c.value.description=e),class:"w-full px-3 py-2 bg-picoclaw-bg border border-picoclaw-border rounded focus-ring text-sm resize-none",rows:"3",disabled:v.value},null,8,yt),[[p,c.value.description]])]),i("div",null,[s[10]||(s[10]=i("label",{class:"block text-sm font-medium mb-2"},"Status",-1)),u(i("select",{"onUpdate:modelValue":s[3]||(s[3]=e=>c.value.status=e),class:"w-full px-3 py-2 bg-picoclaw-bg border border-picoclaw-border rounded focus-ring text-sm",disabled:v.value},[...s[9]||(s[9]=[C('<option value="backlog">Backlog</option><option value="todo">To Do</option><option value="in_progress">In Progress</option><option value="review">Review</option><option value="done">Done</option>',5)])],8,St),[[_,c.value.status]])]),i("div",null,[s[11]||(s[11]=i("label",{class:"block text-sm font-medium mb-2"},"Result",-1)),u(i("textarea",{"onUpdate:modelValue":s[4]||(s[4]=e=>c.value.result=e),class:"w-full px-3 py-2 bg-picoclaw-bg border border-picoclaw-border rounded focus-ring text-sm resize-none",rows:"2",placeholder:"Task result/output",disabled:v.value},null,8,Ct),[[p,c.value.result]])]),d.value.length>0?(r(),n("div",Tt,[s[12]||(s[12]=i("label",{class:"block text-sm font-medium mb-2"},"Execution Logs",-1)),i("div",_t,[i("table",Dt,[i("tbody",Mt,[(r(!0),n(y,null,S(d.value,e=>{return r(),n("tr",{key:e.id,class:"hover:bg-picoclaw-surface transition-smooth"},[i("td",Pt,b((t=e.created_at,new Date(t).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"}))),1),i("td",At,b(e.action),1),i("td",Lt,b(e.details),1)]);var t}),128))])])])])):w("",!0),m.value?(r(),n("div",It,b(m.value),1)):w("",!0)]),i("div",jt,[i("button",{onClick:f,class:"px-4 py-2 bg-picoclaw-error hover:bg-picoclaw-error/80 text-white rounded transition-smooth text-sm font-medium disabled:opacity-50",disabled:v.value}," Delete ",8,Ut),i("button",{onClick:s[5]||(s[5]=e=>t.$emit("close")),class:"px-4 py-2 border border-picoclaw-border rounded hover:bg-picoclaw-border transition-smooth text-sm",disabled:v.value}," Cancel ",8,Et),i("button",{onClick:h,class:"px-4 py-2 bg-picoclaw-accent hover:bg-picoclaw-accent-hover text-white rounded transition-smooth text-sm font-medium disabled:opacity-50",disabled:v.value},b(v.value?"Saving...":"Save Changes"),9,Bt)])])]))}},zt={class:"flex flex-col h-full bg-picoclaw-bg"},$t={class:"border-b border-picoclaw-border bg-picoclaw-surface p-4 space-y-3"},Wt={class:"flex gap-2 flex-col md:flex-row"},Nt={class:"flex-1 relative"},Ot={class:"flex-1 overflow-x-auto p-4"},Rt={class:"flex gap-4 min-h-full"},Vt={class:"flex-shrink-0 w-80"},qt={class:"flex-shrink-0 w-80"},Jt={class:"flex-shrink-0 w-80"},Ht={class:"flex-shrink-0 w-80"},Kt={class:"flex-shrink-0 w-80"},Zt={__name:"TasksTab",setup(e){const s=We(),l=t(""),c=t(""),d=t("recent"),b=t(!1),h=t(null),f=new Me;a(async()=>{try{const e=await Ne();s.setTasks(e.map(e=>({...e,created_at:e.created_at||(new Date).toISOString()})))}catch(e){console.error("Failed to fetch tasks:",e)}try{await f.connect(),s.setWebSocket(f),f.on("update",e=>{"task_updated"===e.type?s.updateTask(e.task.id,e.task):"task_created"===e.type?s.addTask(e.task):"task_deleted"===e.type&&s.removeTask(e.task_id)})}catch(e){console.error("Failed to connect to tasks WebSocket:",e)}}),x(l,e=>{s.setFilter("search",e)});const g=e=>{h.value=e},k=async(e,t)=>{try{await qe(e,t),s.updateTask(e,{status:t})}catch(a){console.error("Failed to move task:",a)}},y=async e=>{try{const t=await Oe(e.title,e.description,e.status);s.addTask(t),b.value=!1}catch(t){console.error("Failed to create task:",t)}},S=async(e,t)=>{try{await Re(e,t),s.updateTask(e,t)}catch(a){console.error("Failed to update task:",a)}},T=async e=>{try{await Ve(e),s.removeTask(e),h.value=null}catch(t){console.error("Failed to delete task:",t)}};return(e,t)=>(r(),n("div",zt,[i("div",$t,[i("div",Wt,[i("div",Nt,[u(i("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.value=e),type:"text",placeholder:"Search tasks...",class:"w-full px-3 py-2 bg-picoclaw-bg border border-picoclaw-border rounded focus-ring text-sm"},null,512),[[p,l.value]])]),u(i("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>d.value=e),onChange:t[2]||(t[2]=e=>v(s).setSortBy(d.value)),class:"px-3 py-2 bg-picoclaw-bg border border-picoclaw-border rounded focus-ring text-sm"},[...t[8]||(t[8]=[i("option",{value:"recent"},"Recientes",-1),i("option",{value:"oldest"},"Antiguos",-1),i("option",{value:"a-z"},"A-Z",-1),i("option",{value:"z-a"},"Z-A",-1)])],544),[[_,d.value]]),u(i("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>c.value=e),onChange:t[4]||(t[4]=e=>v(s).setFilter("status",c.value)),class:"px-3 py-2 bg-picoclaw-bg border border-picoclaw-border rounded focus-ring text-sm"},[...t[9]||(t[9]=[C('<option value="">All Status</option><option value="backlog">Backlog</option><option value="todo">To Do</option><option value="in_progress">In Progress</option><option value="review">Review</option><option value="done">Done</option>',6)])],544),[[_,c.value]]),i("button",{onClick:t[5]||(t[5]=e=>b.value=!0),class:"px-4 py-2 bg-picoclaw-accent hover:bg-picoclaw-accent-hover text-white rounded transition-smooth text-sm font-medium"}," New Task ")])]),i("div",Ot,[i("div",Rt,[i("div",Vt,[m(at,{status:"backlog",title:"Backlog",tasks:v(s).tasksByStatus.backlog,onTaskClick:g,onTaskDrop:k},null,8,["tasks"])]),i("div",qt,[m(at,{status:"todo",title:"To Do",tasks:v(s).tasksByStatus.todo,onTaskClick:g,onTaskDrop:k},null,8,["tasks"])]),i("div",Jt,[m(at,{status:"in_progress",title:"In Progress",tasks:v(s).tasksByStatus.in_progress,onTaskClick:g,onTaskDrop:k},null,8,["tasks"])]),i("div",Ht,[m(at,{status:"review",title:"Review",tasks:v(s).tasksByStatus.review,onTaskClick:g,onTaskDrop:k},null,8,["tasks"])]),i("div",Kt,[m(at,{status:"done",title:"Done",tasks:v(s).tasksByStatus.done,onTaskClick:g,onTaskDrop:k},null,8,["tasks"])])])]),b.value?(r(),o(wt,{key:0,onClose:t[6]||(t[6]=e=>b.value=!1),onCreated:y})):w("",!0),h.value?(r(),o(Ft,{key:1,task:h.value,onClose:t[7]||(t[7]=e=>h.value=null),onUpdated:S,onDeleted:T},null,8,["task"])):w("",!0)]))}},Gt={class:"hidden md:flex h-full"},Qt={class:"flex-1 border-r border-picoclaw-border overflow-hidden"},Xt={class:"flex-1 overflow-hidden"},Yt={class:"md:hidden flex flex-col h-full"},es={class:"flex border-b border-picoclaw-border bg-picoclaw-surface"},ts={class:"flex-1 overflow-hidden"},ss=[{path:"/login",name:"login",component:H,meta:{requiresAuth:!1}},{path:"/dashboard",name:"dashboard",component:{__name:"DashboardPage",setup(e){const t=j(),s=t.activeTab,l=e=>t.setActiveTab(e);return a(()=>{t.restoreUIPreferences()}),(e,t)=>(r(),o(_e,null,{default:h(()=>[i("div",Gt,[i("div",Qt,[m($e)]),i("div",Xt,[m(Zt)])]),i("div",Yt,[i("div",es,[i("button",{onClick:t[0]||(t[0]=e=>l("chat")),class:f(["flex-1 px-4 py-3 font-medium transition-smooth","chat"===v(s)?"border-b-2 border-picoclaw-accent text-picoclaw-accent":"text-picoclaw-text-secondary hover:text-picoclaw-text"])}," Chat ",2),i("button",{onClick:t[1]||(t[1]=e=>l("tasks")),class:f(["flex-1 px-4 py-3 font-medium transition-smooth","tasks"===v(s)?"border-b-2 border-picoclaw-accent text-picoclaw-accent":"text-picoclaw-text-secondary hover:text-picoclaw-text"])}," Tasks ",2)]),i("div",ts,["chat"===v(s)?(r(),o($e,{key:0})):"tasks"===v(s)?(r(),o(Zt,{key:1})):w("",!0)])])]),_:1}))}},meta:{requiresAuth:!0}},{path:"/",redirect:"/dashboard"},{path:"/:pathMatch(.*)*",redirect:"/dashboard"}],as=D({history:M(),routes:ss});as.beforeEach((e,t,s)=>{const a=I(),o=e.meta.requiresAuth;a.isAuthenticated&&a.isSessionExpired&&a.logout(),o&&!a.isAuthenticated?s("/login"):"login"===e.name&&a.isAuthenticated?s("/dashboard"):s()});const os=P(U);os.use(A()),os.use(as),os.mount("#app");
